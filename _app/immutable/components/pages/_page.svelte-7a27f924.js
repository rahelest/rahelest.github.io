import{S as be,i as ge,s as ve,k as g,q as B,a as C,l as v,m as k,r as D,h,c as M,n as J,b as z,G as u,I as O,B as te,J as ke,K as he,H as W,e as ce,L as b,M as we,u as Te}from"../../chunks/index-a3cb497a.js";import{w as j}from"../../chunks/index-673c3b48.js";const ye=[1,2,3,4,5,6,7,8,9],Se=[1,1,1,2,1,3,1,4,1],Ee=[5,1,6,1,7,1,8,1,9];function _e(){return[...ye,...Se,...Ee]}function Ne(e){return Array.isArray(e)?e.every(Number.isInteger):!1}const N=j(),L=j([]),X=j([]);L.subscribe(e=>{e.length>20&&L.update(t=>t.slice(1))});const Be=pe("isDarkMode",!1,e=>e===!0||e===!1),me=j(Be);me.subscribe(e=>{window.localStorage.setItem("isDarkMode",String(e))});const De=pe("save",_e(),e=>Ne(e)),H=j(De);H.subscribe(e=>{window.localStorage.setItem("save",JSON.stringify(e))});function pe(e,t,n){try{const o=JSON.parse(window.localStorage.getItem(e)||"");return n(o)||window.localStorage.setItem(e,JSON.stringify(t)),o!=null?o:t}catch{return t}}function Oe(e,t,n){const o=e[t],r=e[n],l=t<n?t:n,i=t>n?t:n;if(o!==r&&o+r!==10)throw new Error("Bad match");if(t%9===n%9&&ne(l,i,9).every(_=>!e[_])||ne(l,i,1).every(_=>!e[_]))return ue(e,l,i);throw new Error("Bad match")}function ue(e,t,n){const o=e.slice(0);o[t]=0,o[n]=0;const r=Re(o,t,n);return Me(r)}function Re(e,t,n){let o=e.slice(0);const r=t>n?t:n,l=t<n?t:n;for(let i=r;i>=l;i-=9)o=Ue(o,i)?Ce(o,i):o;return o}function Ue(e,t){const n=t-t%9;return n+8>e.length?!1:ne(n-1,n+9,1).every(r=>!e[r])}function Ce(e,t){const n=t-t%9;return[...e.slice(0,n),...e.slice(n+9)]}function ne(e,t,n){const o=Math.floor((t-n-e)/n);return o<1?[]:new Array(o).fill(1).map((r,l)=>e+n*(l+1))}function Me(e){let t=e.slice(0),n=e.length;for(let o=e.length-1;o>=0;o--)if(e[o]&&(n=o),n-o>=9)return t=[...e.slice(0,n-9),...e.slice(n)],t;return t}function fe(e,t,n){const o=e.slice();return o[17]=t[n],o[19]=n,o}function He(e){let t;return{c(){t=g("button")},l(n){t=v(n,"BUTTON",{}),k(t).forEach(h)},m(n,o){z(n,t,o)},p:te,d(n){n&&h(t)}}}function Ve(e){let t,n=e[17]+"",o,r,l,i;function w(){return e[12](e[19])}function y(){return e[13](e[19])}return{c(){t=g("button"),o=B(n),r=C(),this.h()},l(_){t=v(_,"BUTTON",{class:!0});var c=k(t);o=D(c,n),r=M(c),c.forEach(h),this.h()},h(){J(t,"class","notEmpty svelte-145t0hz"),b(t,"selected",e[3]===e[19]),b(t,"one",[1,9].includes(e[17])),b(t,"two",[2,8].includes(e[17])),b(t,"three",[3,7].includes(e[17])),b(t,"four",[4,6].includes(e[17])),b(t,"five",[5].includes(e[17]))},m(_,c){z(_,t,c),u(t,o),u(t,r),l||(i=[O(t,"click",function(){we(e[17]?w:void 0)&&(e[17]?w:void 0).apply(this,arguments)}),O(t,"mouseenter",y),O(t,"mouseleave",e[14])],l=!0)},p(_,c){e=_,c&1&&n!==(n=e[17]+"")&&Te(o,n),c&8&&b(t,"selected",e[3]===e[19]),c&1&&b(t,"one",[1,9].includes(e[17])),c&1&&b(t,"two",[2,8].includes(e[17])),c&1&&b(t,"three",[3,7].includes(e[17])),c&1&&b(t,"four",[4,6].includes(e[17])),c&1&&b(t,"five",[5].includes(e[17]))},d(_){_&&h(t),l=!1,he(i)}}}function de(e){let t;function n(l,i){return l[17]?Ve:He}let o=n(e),r=o(e);return{c(){r.c(),t=ce()},l(l){r.l(l),t=ce()},m(l,i){r.m(l,i),z(l,t,i)},p(l,i){o===(o=n(l))&&r?r.p(l,i):(r.d(1),r=o(l),r&&(r.c(),r.m(t.parentNode,t)))},d(l){r.d(l),l&&h(t)}}}function Ae(e){let t,n,o,r,l,i,w,y,_,c,P,q,E,V,A,S,I,G,T,s,m,R,Y,Z,U,$,oe,F=e[0],p=[];for(let a=0;a<F.length;a+=1)p[a]=de(fe(e,F,a));return{c(){t=g("div"),n=g("button"),o=B("Undo"),l=C(),i=g("button"),w=B("Redo"),_=C(),c=g("button"),P=B("Expand"),q=C(),E=g("button"),V=B("Restart"),A=C(),S=g("button"),I=B("Dark/Light"),G=C(),T=g("div"),s=g("p"),m=B("Clear board by finding "),R=g("a"),Y=B("pairs"),Z=C(),U=g("div");for(let a=0;a<p.length;a+=1)p[a].c();this.h()},l(a){t=v(a,"DIV",{class:!0});var f=k(t);n=v(f,"BUTTON",{});var d=k(n);o=D(d,"Undo"),d.forEach(h),l=M(f),i=v(f,"BUTTON",{});var K=k(i);w=D(K,"Redo"),K.forEach(h),_=M(f),c=v(f,"BUTTON",{});var le=k(c);P=D(le,"Expand"),le.forEach(h),q=M(f),E=v(f,"BUTTON",{});var se=k(E);V=D(se,"Restart"),se.forEach(h),A=M(f),S=v(f,"BUTTON",{});var re=k(S);I=D(re,"Dark/Light"),re.forEach(h),f.forEach(h),G=M(a),T=v(a,"DIV",{class:!0});var Q=k(T);s=v(Q,"P",{});var x=k(s);m=D(x,"Clear board by finding "),R=v(x,"A",{href:!0,target:!0});var ie=k(R);Y=D(ie,"pairs"),ie.forEach(h),x.forEach(h),Z=M(Q),U=v(Q,"DIV",{class:!0});var ae=k(U);for(let ee=0;ee<p.length;ee+=1)p[ee].l(ae);ae.forEach(h),Q.forEach(h),this.h()},h(){n.disabled=r=!e[2].length,i.disabled=y=!e[1].length,J(t,"class","main__menu"),J(R,"href","/guide"),J(R,"target","_blank"),J(U,"class","main__table"),J(T,"class","main__wrapper")},m(a,f){z(a,t,f),u(t,n),u(n,o),u(t,l),u(t,i),u(i,w),u(t,_),u(t,c),u(c,P),u(t,q),u(t,E),u(E,V),u(t,A),u(t,S),u(S,I),z(a,G,f),z(a,T,f),u(T,s),u(s,m),u(s,R),u(R,Y),u(T,Z),u(T,U);for(let d=0;d<p.length;d+=1)p[d].m(U,null);$||(oe=[O(n,"click",e[7]),O(i,"click",e[8]),O(c,"click",e[5]),O(E,"click",e[4]),O(S,"click",e[9])],$=!0)},p(a,[f]){if(f&4&&r!==(r=!a[2].length)&&(n.disabled=r),f&2&&y!==(y=!a[1].length)&&(i.disabled=y),f&3145){F=a[0];let d;for(d=0;d<F.length;d+=1){const K=fe(a,F,d);p[d]?p[d].p(K,f):(p[d]=de(K),p[d].c(),p[d].m(U,null))}for(;d<p.length;d+=1)p[d].d(1);p.length=F.length}},i:te,o:te,d(a){a&&h(t),a&&h(G),a&&h(T),ke(p,a),$=!1,he(oe)}}}function Fe(e,t,n){let o,r,l,i;W(e,H,s=>n(0,o=s)),W(e,X,s=>n(1,r=s)),W(e,L,s=>n(2,l=s)),W(e,N,s=>n(3,i=s));const w=()=>{L.update(s=>[...s,o]),X.set([])},y=()=>{w(),H.set(_e()),N.set(void 0)},_=()=>{w(),H.update(s=>s.slice(0).concat(...s.filter(m=>m>0)))},c=s=>{if(i===void 0){N.set(s);return}if(i===s){N.set(void 0);return}try{const m=Oe(o,i,s);w(),H.set(m),N.set(void 0)}catch(m){console.error(m),N.set(s)}},P=()=>{if(l.length>0){N.set(void 0);const s=l[l.length-1];L.update(m=>m.slice(0,l.length-1)),X.update(m=>[o,...m]),H.set(s)}},q=()=>{if(r.length>0){N.set(void 0);const s=r[0];X.update(m=>m.slice(1)),L.update(m=>[...m,o]),H.set(s)}},E=()=>{me.update(s=>!s),document.body.classList.toggle("dark")};let V;const A=s=>{V=setTimeout(()=>{c(s)},200)},S=()=>{clearTimeout(V)};return[o,r,l,i,y,_,c,P,q,E,A,S,s=>c(s),s=>A(s),()=>S()]}class ze extends be{constructor(t){super(),ge(this,t,Fe,Ae,ve,{})}}export{ze as default};
